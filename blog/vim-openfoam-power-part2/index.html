<!doctype html><html itemscope lang=en-us itemtype=http://schema.org/WebPage><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=5"><meta name=theme-name content="hugoplate"><link rel="shortcut icon" href=/images/favicon_hueb84ecec72665a83aae8c940dfe71474_1906_96x0_resize_lanczos_3.png type=image/x-icon><link rel=icon href=/images/favicon_hueb84ecec72665a83aae8c940dfe71474_1906_96x0_resize_lanczos_3.png type=image/x-icon><link rel=icon type=image/png sizes=48x48 href=/images/favicon_hueb84ecec72665a83aae8c940dfe71474_1906_48x0_resize_lanczos_3.png><link rel=icon type=image/png sizes=96x96 href=/images/favicon_hueb84ecec72665a83aae8c940dfe71474_1906_96x0_resize_lanczos_3.png><link rel=apple-touch-icon sizes=144x144 href=/images/favicon_hueb84ecec72665a83aae8c940dfe71474_1906_144x0_resize_lanczos_3.png><link rel=manifest href=/manifest.webmanifest><meta name=msapplication-TileColor content="#ddd"><meta name=theme-color content="#ffffff"><title>Customize VIM to work efficiently with OpenFOAM - Part 2</title><meta name=generator content="Hugo 0.119.0"><meta name=keywords content="OpenFOAM,CFD,FVM,Numerical Simulation"><meta name=description content="Working with OpenFOAM case files gets really tedious if the text editor is not selected properly; and with VIM I still feel like missing some features, that's why customizing VIM for such tasks is the best path to take"><meta name=author content="elwardi"><meta property="og:image" content="/images/vim-openfoam.png"><meta name=twitter:image content="/images/vim-openfoam.png"><meta name=twitter:card content="summary
            _large_image
          "><meta property="og:image:width" content="725"><meta property="og:image:height" content="431"><meta property="og:image:type" content="image/
        .png
      "><meta property="og:title" content="Customize VIM to work efficiently with OpenFOAM - Part 2"><meta property="og:description" content="Working with OpenFOAM case files gets really tedious if the text editor is not selected properly; and with VIM I still feel like missing some features, that's why customizing VIM for such tasks is the best path to take"><meta property="og:type" content="website"><meta property="og:url" content="/blog/vim-openfoam-power-part2/"><meta name=twitter:title content="Customize VIM to work efficiently with OpenFOAM - Part 2"><meta name=twitter:description content="Working with OpenFOAM case files gets really tedious if the text editor is not selected properly; and with VIM I still feel like missing some features, that's why customizing VIM for such tasks is the best path to take"><script>let indexURL="/searchindex.json",includeSectionsInSearch=["blog"],no_results_for="No results for",empty_search_results_placeholder="Type something to search.."</script><meta http-equiv=x-dns-prefetch-control content="on"><link rel=preconnect href=https://use.fontawesome.com crossorigin><link rel=preconnect href=//cdnjs.cloudflare.com><link rel=preconnect href=//www.googletagmanager.com><link rel=preconnect href=//www.google-analytics.com><link rel=dns-prefetch href=https://use.fontawesome.com><link rel=dns-prefetch href=//ajax.googleapis.com><link rel=dns-prefetch href=//cdnjs.cloudflare.com><link rel=dns-prefetch href=//www.googletagmanager.com><link rel=dns-prefetch href=//www.google-analytics.com><link rel=dns-prefetch href=//fonts.googleapis.com><link rel=dns-prefetch href=//connect.facebook.net><link rel=dns-prefetch href=//platform.linkedin.com><link rel=dns-prefetch href=//platform.twitter.com><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Jost:wght@400;600&family=Signika:wght@500;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script><link href="/css/style.min.aef7813edcc9c7ea0a59f7ae9cba8cd994190d6f06d968f220acfeeccfb403d5.css" integrity="sha256-rveBPtzJx+oKWfeunLqM2ZQZDW8G2WjyIKz+7M+0A9U=" rel=stylesheet><link rel=stylesheet href="/css/style-lazy.min.4c48e17a528890f22b953b1920d800714a9fb552377a78f3aba89b45e2e6ad4a.css" integrity="sha256-TEjhelKIkPIrlTsZINgAcUqftVI3enjzq6ibReLmrUo=" media=print onload='this.media="all",this.onload=null'></head><body><header class="header sticky top-0 z-30"><nav class="navbar container"><div class=order-0><a class="navbar-brand block" href=/><img fetchpriority=high decoding=async class="img logo-light" width=160 height=32 src=/images/logo_hu2ea1f536cd8a3d9765009a4dbd549167_7163_320x0_resize_q90_h2_lanczos_3.webp alt=FoamScience onerror='this.onerror=null,this.src="/images/logo_hu2ea1f536cd8a3d9765009a4dbd549167_7163_320x0_resize_lanczos_3.png"'>
<img fetchpriority=high decoding=async class="img logo-dark" width=160 height=32 src=/images/logo-darkmode_hub75990a2c9eb01f034c9bf9f242d1f22_9732_320x0_resize_q90_h2_lanczos_3.webp alt=FoamScience onerror='this.onerror=null,this.src="/images/logo-darkmode_hub75990a2c9eb01f034c9bf9f242d1f22_9732_320x0_resize_lanczos_3.png"'></a></div><input id=nav-toggle type=checkbox class=hidden>
<label for=nav-toggle class="order-3 cursor-pointer flex items-center lg:hidden text-dark dark:text-white lg:order-1"><svg id="show-button" class="h-6 fill-current block" viewBox="0 0 20 20"><title>Menu Open</title><path d="M0 3h20v2H0V3zm0 6h20v2H0V9zm0 6h20v2H0V0z"/></svg><svg id="hide-button" class="h-6 fill-current hidden" viewBox="0 0 20 20"><title>Menu Close</title><polygon points="11 9 22 9 22 11 11 11 11 22 9 22 9 11 -2 11 -2 9 9 9 9 -2 11 -2" transform="rotate(45 10 10)"/></svg></label><ul id=nav-menu class="navbar-nav order-3 hidden lg:flex w-full pb-6 lg:order-1 lg:w-auto lg:space-x-2 lg:pb-0 xl:space-x-8"><li class=nav-item><a class=nav-link href=/>Home</a></li><li class=nav-item><a class=nav-link href=/about/>About</a></li><li class=nav-item><a class=nav-link href=/blog/>Blog</a></li><li class=nav-item><a class=nav-link href=/authors/>Authors</a></li><li class=nav-item><a class=nav-link href=/categories/>Categories</a></li><li class=nav-item><a class=nav-link href=/projects/>Projects</a></li></ul><div class="order-1 ml-auto flex items-center md:order-2 lg:ml-0"><button aria-label=search class="border-border text-dark hover:text-primary dark:border-darkmode-border mr-5 inline-block border-r pr-5 text-xl dark:text-white" data-target=search-modal>
<i class="fa-solid fa-search"></i></button><div class="theme-switcher mr-5"><input id=theme-switcher data-theme-switcher type=checkbox>
<label for=theme-switcher><span class=sr-only>theme switcher</span>
<span><svg class="absolute left-[4px] top-[4px] z-10 opacity-100 dark:opacity-0" viewBox="0 0 56 56" fill="#fff" height="16" width="16"><path d="M30 4.6c0-1-.9-2-2-2a2 2 0 00-2 2v5c0 1 .9 2 2 2s2-1 2-2zm9.6 9a2 2 0 000 2.8c.8.8 2 .8 2.9.0L46 13a2 2 0 000-2.9 2 2 0 00-3 0zm-26 2.8c.7.8 2 .8 2.8.0.8-.7.8-2 0-2.9L13 10c-.7-.7-2-.8-2.9.0-.7.8-.7 2.1.0 3zM28 16A12 12 0 0016 28a12 12 0 0012 12 12 12 0 0012-12A12 12 0 0028 16zm23.3 14c1.1.0 2-.9 2-2s-.9-2-2-2h-4.9a2 2 0 00-2 2c0 1.1 1 2 2 2zM4.7 26a2 2 0 00-2 2c0 1.1.9 2 2 2h4.9c1 0 2-.9 2-2s-1-2-2-2zm37.8 13.6a2 2 0 00-3 0 2 2 0 000 2.9l3.6 3.5a2 2 0 002.9.0c.8-.8.8-2.1.0-3zM10 43.1a2 2 0 000 2.9c.8.7 2.1.8 3 0l3.4-3.5c.8-.8.8-2.1.0-2.9s-2-.8-2.9.0zm20 3.4c0-1.1-.9-2-2-2a2 2 0 00-2 2v4.9c0 1 .9 2 2 2s2-1 2-2z"/></svg><svg class="absolute left-[4px] top-[4px] z-10 opacity-0 dark:opacity-100" viewBox="0 0 24 24" fill="none" height="16" width="16"><path fill="#000" fill-rule="evenodd" clip-rule="evenodd" d="M8.2 2.2c1-.4 2 .6 1.6 1.5-1 3-.4 6.4 1.8 8.7a8.4 8.4.0 008.7 1.8c1-.3 2 .5 1.5 1.5v.1A10.3 10.3.0 0112.4 22 10.3 10.3.0 013.2 6.7c1-2 2.9-3.5 4.9-4.4z"/></svg></span></label></div><script>var darkMode=!0,themeSwitch;localStorage.getItem("theme")==="dark"?darkMode=!0:localStorage.getItem("theme")==="light"&&(darkMode=!1),darkMode&&document.documentElement.classList.toggle("dark"),themeSwitch=document.querySelectorAll("[data-theme-switcher]"),document.addEventListener("DOMContentLoaded",()=>{[].forEach.call(themeSwitch,function(e){e.checked=!!darkMode,e.addEventListener("click",()=>{document.documentElement.classList.toggle("dark"),localStorage.setItem("theme",document.documentElement.classList.contains("dark")?"dark":"light")})})})</script></div></nav></header><div class="search-wrapper search-modal" data-image=true data-description=true data-tags=true data-categories=true tabindex=-1 aria-hidden=true style=--color-primary:#121212><div class=search-wrapper-content><div class=search-input-body><label for=search-modal-input style=margin-top:-1px><span class=sr-only>search icon</span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" height="18" width="18" class="search-icon" data-type="search"><path fill="currentcolor" d="M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8.0 45.3s-32.8 12.5-45.3.0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9.0 208S93.1.0 208 0 416 93.1 416 208zM208 352a144 144 0 100-288 144 144 0 100 288z"/></svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" height="18" width="18" class="search-reset" data-type="reset"><path fill="currentcolor" d="M256 512A256 256 0 10256 0a256 256 0 100 512zM175 175c9.4-9.4 24.6-9.4 33.9.0l47 47 47-47c9.4-9.4 24.6-9.4 33.9.0s9.4 24.6.0 33.9l-47 47 47 47c9.4 9.4 9.4 24.6.0 33.9s-24.6 9.4-33.9.0l-47-47-47 47c-9.4 9.4-24.6 9.4-33.9.0s-9.4-24.6.0-33.9l47-47-47-47c-9.4-9.4-9.4-24.6.0-33.9z"/></svg></label>
<input id=search-modal-input type=text data-search-input autocomplete=off aria-label=Search placeholder="Search Post ..."></div><div class=search-wrapper-body><div class=search-result data-search-result></div><span class=search-result-empty>Type something to search..</span></div><div class=search-wrapper-footer><span><kbd><svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" fill="currentcolor" style="margin-top:-2px" viewBox="0 0 16 16"><path d="M3.204 11h9.592L8 5.519 3.204 11zm-.753-.659 4.796-5.48a1 1 0 011.506.0l4.796 5.48c.566.647.106 1.659-.753 1.659H3.204a1 1 0 01-.753-1.659z"/></svg></kbd><kbd><svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" fill="currentcolor" style="margin-top:1px" viewBox="0 0 16 16"><path d="M3.204 5h9.592L8 10.481 3.204 5zm-.753.659 4.796 5.48a1 1 0 001.506.0l4.796-5.48c.566-.647.106-1.659-.753-1.659H3.204a1 1 0 00-.753 1.659z"/></svg></kbd>to navigate</span>
<span><kbd><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" fill="currentcolor" style="display:inline-block" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M14.5 1.5a.5.5.0 01.5.5v4.8a2.5 2.5.0 01-2.5 2.5H2.707l3.347 3.346a.5.5.0 01-.708.708l-4.2-4.2a.5.5.0 010-.708l4-4a.5.5.0 11.708.708L2.707 8.3H12.5A1.5 1.5.0 0014 6.8V2a.5.5.0 01.5-.5z"/></svg></kbd>to select</span>
<span class=search-result-info></span>
<span data-target=close-search-modal><kbd>ESC</kbd> to close</span></div></div></div><main><section class="section pt-7"><div class=container><div class="row justify-center"><article class=lg:col-10><div class=mb-10><picture><source srcset=/images/vim-openfoam_hu2ee0a4cb629d438b90e279549678bc92_82586_545x0_resize_q90_h2_lanczos_3.webp media="(max-width: 575px)"><source srcset=/images/vim-openfoam_hu2ee0a4cb629d438b90e279549678bc92_82586_600x0_resize_q90_h2_lanczos_3.webp media="(max-width: 767px)"><source srcset=/images/vim-openfoam_hu2ee0a4cb629d438b90e279549678bc92_82586_700x0_resize_q90_h2_lanczos_3.webp media="(max-width: 991px)"><source srcset=/images/vim-openfoam_hu2ee0a4cb629d438b90e279549678bc92_82586_1110x0_resize_q90_h2_lanczos_3.webp><img loading=lazy decoding=async src=/images/vim-openfoam_hu2ee0a4cb629d438b90e279549678bc92_82586_1110x0_resize_lanczos_3.png class="w-full rounded img" alt="Customize VIM to work efficiently with OpenFOAM - Part 2" width=725 height=431></picture></div><h1 class="h2 mb-4">Customize VIM to work efficiently with OpenFOAM - Part 2</h1><ul class=mb-4><li class="mr-4 inline-block"><a href=/authors/mohammed-elwardi-fadeli/><i class="fa-regular fa-circle-user mr-2"></i>Mohammed Elwardi Fadeli</a></li><li class="mr-4 inline-block"><i class="fa-regular fa-folder mr-2"></i>
<a href=/categories/productivity/ class=ms-1>Productivity</a></li><li class="mr-4 inline-block"><i class="fa-regular fa-clock mr-2"></i>
August 28, 2018</li></ul><div class="content mb-10"><p>We&rsquo;ve seen in <a href=/vim-openfoam-power-part1>the previous part</a>
some ways to improve our interaction with OpenFOAM case directories and files. In this new post, we want to implement something that facilitates running <code>blockMesh</code>, or the case solver, right from inside VIM; without going back to the shell. Of course, our implementation should catch errors in the quick fix list (if there are any), then go to the concerned file, and put the cursor on the error line.</p><div class="notice warning"><div class=notice-head><svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path fillRule="evenodd" clipRule="evenodd" d="M10 0c5.522.0 10 4.478 10 10S15.522 20 10 20 0 15.522.0 10 4.478.0 10 0zm0 2C5.589 2 2 5.589 2 10s3.589 8 8 8 8-3.589 8-8-3.589-8-8-8zm2.293 4.293 1.414 1.414L11.414 10l2.293 2.293-1.414 1.414L10 11.414 7.707 13.707 6.293 12.293 8.586 10 6.293 7.707 7.707 6.293 10 8.586l2.293-2.293z" fill="currentcolor"/></svg><p>Warning</p></div><div class=notice-body><p><p>This post is outdated; there are better ways to efficiently edit OpenFOAM files with (Neo)Vim:</p><ul><li><a href=https://github.com/FoamScience/tree-sitter-foam target=_blank><strong>tree-sitter-foam</strong></a>
: OpenFOAM syntax highlighting using tree-sitter for NeoVim.</li><li><a href=https://github.com/FoamScience/foam-language-server target=_blank><strong>foam-language-server</strong></a>
: A language server for OpenFOAM files.</li></ul></p></div></div><p>For this, we&rsquo;ll use two main VIM facilities: <em>VIM compilers</em> and <em>QuickFix</em> list.</p><p>The compilers are used to automatically run a shell command on a file. For example:</p><ul><li>Running a <code>gcc</code> (or <code>make</code> if there is a <em>makeFile</em>) command on a <code>*.cpp</code> file would compile it to an executable.</li><li>Running a <code>pdflatex</code> (or better <code>latexmk</code>) command on a <em>Latex file</em> would compile a PDF version of the document.</li><li>Running a <code>blockMesh</code> command on a <em>blockMeshDict</em> would build the mesh and check for errors in <code>blockMesh</code>&rsquo;s output.</li></ul><p>In fact, we can run as many commands as we want on the file using VIM compilers. Think: Generate the mesh, check its validity, set fields, and run appropriate solvers. (In my opinion, this kind of workflow beats GUIs to death.)</p><p>So, let&rsquo;s get to work. We need to know how VIM&rsquo;s default compiler plugins are set, and the best way to learn is by looking at examples. On Unix systems, the default compilers should be in <code>/usr/share/vim/vim74/compiler</code> directory. You can use VIM&rsquo;s ex-command <code>:compile</code> to find out where they are on your system.</p><h2 id=studying-an-example-vim-compiler>Studying an example VIM compiler</h2><p>First of all, a VIM compiler plugin is nothing more than a short <code>VimL</code> script, configuring two main things: <code>errorformat</code> (scanf-style strings, separated by commas, showing the format of error lines) and <code>makeprg</code> (make program, the shell executable to run).</p><p>As an example, let&rsquo;s go through the <em>ant-compiler</em> line by line:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-vim data-lang=vim><span style=display:flex><span><span style=color:#75715e>&#34; Vim Compiler File</span>
</span></span><span style=display:flex><span><span style=color:#75715e>&#34; Compiler:	ant</span>
</span></span><span style=display:flex><span><span style=color:#75715e>&#34; Maintainer:	Johannes Zellner &lt;johannes@zellner.org&gt;</span>
</span></span><span style=display:flex><span><span style=color:#75715e>&#34; Last Change:	Mi, 13 Apr 2005 22:50:07 CEST</span>
</span></span></code></pre></div><p>The header, just for information, then we have some checks to perform:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-vim data-lang=vim><span style=display:flex><span><span style=color:#66d9ef>if</span> <span style=color:#a6e22e>exists</span>(<span style=color:#e6db74>&#34;current_compiler&#34;</span>)
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>finish</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>endif</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>current_compiler</span> = <span style=color:#e6db74>&#34;ant&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> <span style=color:#a6e22e>exists</span>(<span style=color:#e6db74>&#34;:CompilerSet&#34;</span>) != <span style=color:#ae81ff>2</span>		<span style=color:#75715e>&#34; older Vim always used :setlocal</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>command</span> -<span style=color:#a6e22e>nargs</span>=* <span style=color:#a6e22e>CompilerSet</span> <span style=color:#a6e22e>setlocal</span> &lt;<span style=color:#a6e22e>args</span>&gt;
</span></span><span style=display:flex><span><span style=color:#66d9ef>endif</span>
</span></span></code></pre></div><p>The first &ldquo;if&rdquo; structure checks if the compiler is already set; if it&rsquo;s the case, Vim will leave the script. If not, it declares <code>current_compiler</code> as &ldquo;ant&rdquo; (so the next time the script executes, it will be finished in the first &ldquo;if&rdquo; structure). The second &ldquo;if&rdquo; statement sets compatibility stuff for older Vim versions.</p><p>All the <code>cpo</code>-related stuff is set to configure Vi-compatibility options; we don&rsquo;t need to learn about this topic, just don&rsquo;t touch those lines!</p><p>The line <code>CompilerSet makeprg=ant</code> sets the Ant program as the make program. When you execute the Ex-command <code>:make</code>, Vim runs <code>ant</code> in a shell and watches for its output.</p><p><code>CompilerSet errorformat=\ %#[%.%#]\ %#%f:%l:%v:%*\\d:%*\\d:\%t%[%^:]%#:%m</code> shows Vim how to find the error line and what to extract from it (explained in more detail in the next section).</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-vim data-lang=vim><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>s</span>:<span style=color:#a6e22e>cpo_save</span> = &amp;<span style=color:#a6e22e>cpo</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>set</span> <span style=color:#a6e22e>cpo</span>&amp;<span style=color:#a6e22e>vim</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>CompilerSet</span> <span style=color:#a6e22e>makeprg</span>=<span style=color:#a6e22e>ant</span>
</span></span><span style=display:flex><span><span style=color:#75715e>&#34; first  line:</span>
</span></span><span style=display:flex><span><span style=color:#75715e>&#34;     ant with jikes +E, which assumes  the following</span>
</span></span><span style=display:flex><span><span style=color:#75715e>&#34;     two property lines in your &#39;build.xml&#39;:</span>
</span></span><span style=display:flex><span><span style=color:#75715e>&#34;</span>
</span></span><span style=display:flex><span><span style=color:#75715e>&#34;         &lt;property name = &#34;build.compiler&#34;       value = &#34;jikes&#34;/&gt;</span>
</span></span><span style=display:flex><span><span style=color:#75715e>&#34;         &lt;property name = &#34;build.compiler.emacs&#34; value = &#34;true&#34;/&gt;</span>
</span></span><span style=display:flex><span><span style=color:#75715e>&#34;</span>
</span></span><span style=display:flex><span><span style=color:#75715e>&#34; second line:</span>
</span></span><span style=display:flex><span><span style=color:#75715e>&#34;     ant with javac</span>
</span></span><span style=display:flex><span><span style=color:#75715e>&#34;</span>
</span></span><span style=display:flex><span><span style=color:#75715e>&#34; note that this will work also for tasks like [wtkbuild]</span>
</span></span><span style=display:flex><span><span style=color:#75715e>&#34;</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>CompilerSet</span> <span style=color:#a6e22e>errorformat</span>=\ %#[%.%#]\ %#%<span style=color:#a6e22e>f</span>:%<span style=color:#a6e22e>l</span>:%<span style=color:#a6e22e>v</span>:%*\\<span style=color:#a6e22e>d</span>:%*\\<span style=color:#a6e22e>d</span>:\ %<span style=color:#a6e22e>t</span>%[%^:]%#:%<span style=color:#a6e22e>m</span>,
</span></span><span style=display:flex><span>    \%<span style=color:#a6e22e>A</span>\ %#[%.%#]\ %<span style=color:#a6e22e>f</span>:%<span style=color:#a6e22e>l</span>:\ %<span style=color:#a6e22e>m</span>,%-<span style=color:#a6e22e>Z</span>\ %#[%.%#]\ %<span style=color:#a6e22e>p</span>^,%<span style=color:#a6e22e>C</span>\ %#[%.%#]\ %#%<span style=color:#a6e22e>m</span>
</span></span><span style=display:flex><span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e>&#34; ,%-C%.%#</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> &amp;<span style=color:#a6e22e>cpo</span> = <span style=color:#a6e22e>s</span>:<span style=color:#a6e22e>cpo_save</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>unlet</span> <span style=color:#a6e22e>s</span>:<span style=color:#a6e22e>cpo_save</span>
</span></span></code></pre></div><h3 id=using-errorformats-to-catch-openfoam-fatal-errors>Using errorformats to catch OpenFOAM Fatal Errors</h3><p>These <em>errorformats</em> are similar to regular expressions. Assume a program outputting errors in the following format:</p><p><code>Error: something-is-wrong in /path/to/file at line 25</code></p><p>To match this error line, we use a single scanf-style string, that may contain special items (these are the most important ones):</p><ul><li><code>%f</code> matches a file name (a string), eg. <em>/path/to/file</em></li><li><code>%l</code> matches a line number (digits), eg. <em>25</em></li><li><code>%m</code> matches an error message, eg. <em>something-is-wrong</em></li><li><code>%*{conv}</code> converts stuff from regexp to scanf string, eg. %*[a-z] matches any number of lowercase alphabets.</li></ul><p>Thus, the example line would be matched with <code>\Error: %m in %f at line %l</code></p><h2 id=building-a-compiler-plugin-for-blockmesh>Building a compiler plugin for blockMesh</h2><p>The goal of this section is to build a blockMesh-compiler for VIM which can be used to browse errors when the tool fails. For this, we need to create our custom-compilers directory <code>$HOME/.vim/compiler</code>.</p><p>Copy the <code>ant.vim</code> compiler to that directory and rename it as <code>blockMesh.vim</code>, on Unix systems, one can say:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>cp /usr/share/vim/vim74/compiler/ant.vim ~/.vim/compiler/blockMesh.vim
</span></span></code></pre></div><p>Modify the header so it suits your preferences, and then start building the custom VIM compiler:</p><ul><li>Hopefully, you are editing the file with VIM.</li><li>Change all occurrences of &ldquo;<em>ant</em>&rdquo; to &ldquo;<em>blockMesh</em>&rdquo; in the file <code>:%s/ant/blockMesh/g</code></li><li>Time to set the &ldquo;errorformat&rdquo;: We know that OpenFOAM displays errors in multiple
lines (if you write &ldquo;hxe&rdquo; instead of &ldquo;hex&rdquo; in a <em>blockMeshDict</em>):</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>--&gt; FOAM FATAL IO ERROR:
</span></span><span style=display:flex><span>CellShape has unknown model on line 45 the word &#39;hxe&#39;
</span></span><span style=display:flex><span>file: /home/elwardi/OpenFOAM/elwardi-4.1/run/movingCone/system/blockMeshDict.blocks at line 45.
</span></span></code></pre></div><p>Note that this is NOT a general FOAM ERROR; some other IO errors specify a range of lines; others suggest solutions before stating the error-line.</p><p>The most important line is probably the one stating the filename, and the exact line to jump to (these will be stored in <code>%f</code> and <code>%l</code> respectively).However, there are some problems in the filename: notice the ending <code>.blocks</code> appended to it, in fact, things could be messier: <code>.ddtschemes.default</code>.</p><p>How many dots are there in the filename? The real problem is that the <code>path/to/case</code> always contains a dot character (frrom the OpenFOAM version, eg. user-4.1), so matching from the start of the path to the first dot character won&rsquo;t work!</p><p>Instead, we do notice that versions are expressed in digits, and that case names usually contain no dots (hopefully); so, matching the path up to the first dot character preceding an alphabet character is a good idea:
<code>CompilerSet errorformat=\file:\ %f\.%[a-z]%*[a-z\ ]\ line\ %l\.</code></p><ul><li><code>%f</code> matches the string &ldquo;file: " at the start of line, then starts storing the filename up to the first dot that falls immediately before a lowercase alphabet character (hopefully, that&rsquo;s the keyword <code>.blocks</code>, or <code>.fvSchemes</code> &mldr;). Then we&rsquo;ll have some lowercase characters and spaces until we reach the last line before &ldquo;line&rdquo; string, then <code>%l</code> catches the line number (in case there are two, it catches the last one!).</li></ul><p>Now, what to tell the user? Well, It&rsquo;s good to have a message at the status line saying &ldquo;<em>CellShape has unknown model &mldr;</em>&rdquo;, so, we should use a complex multi-line <em>errorformat</em>! But, still we&rsquo;ll have to deal with the problem of how many lines are there between the line that tells our message and the line that spells out the error line.</p><p>This is actually troublesome, so, I&rsquo;ve decided to approach the situation differently: We leave our filename and error-line alone, and add another error that captures only the message (using a simple multi-line error-format).</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-vim data-lang=vim><span style=display:flex><span><span style=color:#a6e22e>CompilerSet</span> <span style=color:#a6e22e>errorformat</span>=\<span style=color:#a6e22e>file</span>:\ %<span style=color:#a6e22e>f</span>\.%[<span style=color:#a6e22e>a</span>-<span style=color:#a6e22e>z</span>]%*[<span style=color:#a6e22e>a</span>-<span style=color:#a6e22e>z</span>\ ]\ <span style=color:#a6e22e>line</span>\ %<span style=color:#a6e22e>l</span>\.
</span></span><span style=display:flex><span>                        \%<span style=color:#a6e22e>E</span>--&gt;\ %*[<span style=color:#a6e22e>A</span>-<span style=color:#a6e22e>Z</span>:\ ],%<span style=color:#a6e22e>Z</span>%<span style=color:#a6e22e>m</span>
</span></span></code></pre></div><ul><li><code>%E</code> denotes the start of a multi-line error.</li><li>Then we find the line saying <code>Fatal IO Error</code> (starts with –> then there are some uppercase letters,semicolons, and spaces).</li><li><code>%Z</code> denotes the end of multi-line error (which is only one line here!) then we capture everything in the second line as a <code>%m</code> (an error message).</li></ul><p>The compiler plugin is now complete:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-vim data-lang=vim><span style=display:flex><span><span style=color:#75715e>&#34; Vim Compiler File</span>
</span></span><span style=display:flex><span><span style=color:#75715e>&#34; Compiler: blockMesh</span>
</span></span><span style=display:flex><span><span style=color:#75715e>&#34; Fadeli Mohammed Elwardi &lt;foamscience.github.io&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> <span style=color:#a6e22e>exists</span>(<span style=color:#e6db74>&#34;current_compiler&#34;</span>)
</span></span><span style=display:flex><span><span style=color:#a6e22e>finish</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>endif</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>current_compiler</span> = <span style=color:#e6db74>&#34;blockMesh&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> <span style=color:#a6e22e>exists</span>(<span style=color:#e6db74>&#34;:CompilerSet&#34;</span>) != <span style=color:#ae81ff>2</span>
</span></span><span style=display:flex><span><span style=color:#75715e>&#34; older Vim always used :setlocal</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>command</span> -<span style=color:#a6e22e>nargs</span>=* <span style=color:#a6e22e>CompilerSet</span> <span style=color:#a6e22e>setlocal</span> &lt;<span style=color:#a6e22e>args</span>&gt;
</span></span><span style=display:flex><span><span style=color:#66d9ef>endif</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>s</span>:<span style=color:#a6e22e>cpo_save</span> = &amp;<span style=color:#a6e22e>cpo</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>set</span> <span style=color:#a6e22e>cpo</span>&amp;<span style=color:#a6e22e>vim</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>CompilerSet</span> <span style=color:#a6e22e>makeprg</span>=<span style=color:#a6e22e>blockMesh</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>CompilerSet</span> <span style=color:#a6e22e>errorformat</span>=
</span></span><span style=display:flex><span>                 \\<span style=color:#a6e22e>file</span>:\ %<span style=color:#a6e22e>f</span>\.%[<span style=color:#a6e22e>a</span>-<span style=color:#a6e22e>z</span>]%*[<span style=color:#a6e22e>a</span>-<span style=color:#a6e22e>z</span>\ ]\ <span style=color:#a6e22e>line</span>\ %<span style=color:#a6e22e>l</span>\.,
</span></span><span style=display:flex><span>                 \%<span style=color:#a6e22e>E</span>-&gt;\ %*[<span style=color:#a6e22e>A</span>-<span style=color:#a6e22e>Z</span>:\ ],%<span style=color:#a6e22e>Z</span>%<span style=color:#a6e22e>m</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> &amp;<span style=color:#a6e22e>cpo</span> = <span style=color:#a6e22e>s</span>:<span style=color:#a6e22e>cpo_save</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>unlet</span> <span style=color:#a6e22e>s</span>:<span style=color:#a6e22e>cpo_save</span>
</span></span></code></pre></div><p>And you should be ready to test it with a sample (erroneous) <code>blockMeshDict</code>:</p><ol><li>Make something of importance go wrong in a <code>blockMeshDict</code> (the last ; in a block is not that important).</li><li>While editing <code>blockMeshDict</code>, run <code>:compile blockMesh</code> to set the correct compiler (We&rsquo;ll improve on this).</li><li>Hopefully your working directory is set by our previous <code>customFoam</code> script, if it is the case, run the ex-command <code>:make</code> and check that beautiful (and useful) error message!</li><li>To automatically jump to the error line, type <code>:cn</code> (short of cnext).</li></ol><p>{{ notice &ldquo;tip&rdquo; }}
The error format can&rsquo;t handle &ldquo;from line 15 to line 18.&rdquo; lines, because no file path will be output in such lines!
{{ /notice }}</p><p>Now that VIM knows how to handle <code>blockMesh</code>, let&rsquo;s introduce it to the other FOAM applications (we&rsquo;ll be doing just solvers for illustration). Wait, should we repeat the work done previously tens of times? Absolutely not.</p><p>The goal of this blog post is to achieve this work-flow:</p><ol><li>When I read in a FOAM File, VIM changes its working dir. to case dir. (already implemented in <code>customFoam.vim</code>, see <a href=/vim-openfoam-power-part1>this earlier post</a>
)</li><li>VIM looks for the suitable OpenFOAM solver for the current case (mentioned in <code>controlDict</code>).</li><li>VIM sets the right solver as the <code>makeprg</code> automatically.</li><li>When I run <code>:make</code> (Or press a shortcut to it), VIM will filter the output to show me the errors if there are any.</li></ol><p>One more thing, I want my own solvers to be involved, so, I won&rsquo;t generate a list of standard solvers and compare anything to its content. That&rsquo;s one lousy approach to take!</p><p>Instead, I&rsquo;m going to define two functions: The first one, in <code>customFoam.vim</code>, which searches and stores the solver name, and the second sets the option <code>makeprg</code> dynamically in a general compiler plugin called <code>foam.vim</code>.</p><h2 id=use-foamgetapplication-to-get-solver-name>Use FOAMGetApplication to get solver name</h2><p>From any file in the case dir., we can tell VIM what solver is to be used with the current case because it&rsquo;s mentioned in the <code>controlDict</code> file. Actually, we have two options here:</p><ul><li>Use VIM to take a look at <code>controlDict</code>, and store a string representing the solver name.</li><li>Or, do it the FOAM way (use run functions: <code>getApplication</code>), which needs a working Installation of OpenFOAM (but that&rsquo;s Ok, you won&rsquo;t be reading this guide otherwise). This method is heavily used in <code>.Allrun</code> shell scripts.</li></ul><p>In order to learn how VIM interacts with the system, we&rsquo;ll use the second option: We&rsquo;ll add a <code>FOAMGetApplication()</code> function to our <code>customFoam.vim</code></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-vim data-lang=vim><span style=display:flex><span><span style=color:#66d9ef>function</span>! <span style=color:#a6e22e>FOAMGetApplication</span>()
</span></span><span style=display:flex><span><span style=color:#75715e>    &#34; Source run functions and execute getApplication</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>cmd</span>=<span style=color:#e6db74>&#34;. $WM_PROJECT_DIR/bin/tools/RunFunctions &amp;&amp; getApplication&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>foamApp</span>=<span style=color:#a6e22e>system</span>(<span style=color:#a6e22e>cmd</span>)[:<span style=color:#ae81ff>-2</span>]
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>echomsg</span> <span style=color:#e6db74>&#39;This case is set to be simulated with: &#39;</span>.<span style=color:#a6e22e>foamApp</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>return</span> <span style=color:#a6e22e>foamApp</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>endfunction</span>
</span></span></code></pre></div><ul><li><code>cmd</code> is a string, representing the shell command that sources run functions and then executes <code>getApplication</code> in the current case dir.</li><li><code>foamApp</code> is the output of the previous command (solver name), the <code>[:-2]</code> part deletes the last two characters from the output of the command (by default, It will output <code>icoFoam @</code>, the last two characters are not needed).</li><li><code>echomsg</code> writes messages to the status line, and keeps them in messages list (run <code>:messages</code>).</li></ul><h2 id=the-general-vim-compiler-plugin-for-openfoam>The general VIM compiler plugin for OpenFOAM</h2><p>Copy <code>blockMesh.vim</code> to <code>foam.vim</code>.</p><ul><li>Don&rsquo;t forget <code>let current_compiler = "foam"</code></li><li>Declare a script variable, storing the solver name
<code>let s:foamApp = FOAMGetApplication()</code></li><li>Instead of <code>CompilerSet</code>, define a new function setting the compiler to the solver name, then call it.</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-vim data-lang=vim><span style=display:flex><span><span style=color:#66d9ef>function</span>! <span style=color:#a6e22e>FOAMSetCompiler</span>()
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>exe</span> <span style=color:#e6db74>&#39;CompilerSet makeprg=&#39;</span>.<span style=color:#a6e22e>s</span>:<span style=color:#a6e22e>foamApp</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>endfunction</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>call</span> <span style=color:#a6e22e>FOAMSetCompiler</span>()
</span></span></code></pre></div><ul><li>For the file line in the error format, use
<code>\\file:\ %f\.%*[a-zA-Z]%*[a-zA-Z\ .]\ line\ %l%*[.a-zA-Z0-9\ ]</code>
So we can cover stuff like &ldquo;from line 15 to line 20.&rdquo; and be more dynamic with the number of dots in the filename (handle things like <code>0/U.boundaryField.inlet</code>). Done!! We are ready to go!</li></ul><h2 id=final-tweaks-vims-auto-commands>Final tweaks: VIM&rsquo;s auto-commands</h2><p>We only need to tell VIM to set the compiler to &ldquo;foam&rdquo; whenever a Foam File is opened; and to set the compiler to <code>blockMesh</code> if the entered buffer is named <code>blockMeshDict</code>.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-vim data-lang=vim><span style=display:flex><span><span style=color:#a6e22e>augroup</span> <span style=color:#a6e22e>FOAMautocmds</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>autocmd</span>!
</span></span><span style=display:flex><span><span style=color:#66d9ef>autocmd</span> <span style=color:#a6e22e>FileType</span> <span style=color:#a6e22e>foam</span>* <span style=color:#a6e22e>call</span> <span style=color:#a6e22e>FOAMSetPathToCaseDir</span>()
</span></span><span style=display:flex><span><span style=color:#66d9ef>autocmd</span> <span style=color:#a6e22e>FileType</span> <span style=color:#a6e22e>foam</span>* <span style=color:#a6e22e>compile</span> <span style=color:#a6e22e>foam</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>autocmd</span> <span style=color:#a6e22e>BufEnter</span> *<span style=color:#a6e22e>blockMeshDict</span> <span style=color:#a6e22e>compile</span> <span style=color:#a6e22e>blockMesh</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>augroup</span> <span style=color:#a6e22e>End</span>
</span></span></code></pre></div><p>{{ notice &ldquo;tip&rdquo; }}
<code>*FileType* autocmds</code> will <em>always</em> be executed before <em>BufEnter</em> ones, so
<code>blockMeshDict</code> files will always have <code>blockMesh</code> as their compiler.
{{ /notice }}</p><p>The complete configuration files can be downloaded from here:
<a href="https://drive.google.com/uc?id=1Sf-6Pm8twy8dM6YIcWZ8lMFaem2S2F0O&amp;export=download" class="btn btn-primary" target=_blank rel=noopener>Vim Customization</a></p></div><div class="row items-start justify-between"><div class="lg:col-5 mb-10 flex items-center lg:mb-0"><h5 class=mr-3>Tags :</h5><ul><li class=inline-block><a class="bg-theme-light hover:bg-primary dark:bg-darkmode-theme-light dark:hover:bg-darkmode-primary dark:hover:text-dark m-1 block rounded px-3 py-1 hover:text-white" href=/tags/openfoam/>Open foam</a></li><li class=inline-block><a class="bg-theme-light hover:bg-primary dark:bg-darkmode-theme-light dark:hover:bg-darkmode-primary dark:hover:text-dark m-1 block rounded px-3 py-1 hover:text-white" href=/tags/vim/>Vim</a></li></ul></div><div class="lg:col-4 flex items-center"><div class=share-icons><h5 class=share-title>Share :</h5><a class="share-link share-facebook" href="https://facebook.com/sharer/sharer.php?u=%2fblog%2fvim-openfoam-power-part2%2f" target=_blank rel=noopener aria-label="share facebook"><span class=share-icon><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18.77 7.46H14.5v-1.9c0-.9.6-1.1 1-1.1h3V.5h-4.33C10.24.5 9.5 3.44 9.5 5.32v2.15h-3v4h3v12h5v-12h3.85l.42-4z"/></svg></span></a><a class="share-link share-twitter" href="https://twitter.com/intent/tweet/?text=Share&amp;url=%2fblog%2fvim-openfoam-power-part2%2f" target=_blank rel=noopener aria-label="share twitter"><span aria-hidden=true class=share-icon><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M23.44 4.83c-.8.37-1.5.38-2.22.02.93-.56.98-.96 1.32-2.02-.88.52-1.86.9-2.9 1.1-.82-.88-2-1.43-3.3-1.43-2.5.0-4.55 2.04-4.55 4.54.0.36.03.7.1 1.04-3.77-.2-7.12-2-9.36-4.75-.4.67-.6 1.45-.6 2.3.0 1.56.8 2.95 2 3.77-.74-.03-1.44-.23-2.05-.57v.06c0 2.2 1.56 4.03 3.64 4.44-.67.2-1.37.2-2.06.08.58 1.8 2.26 3.12 4.25 3.16C5.78 18.1 3.37 18.74 1 18.46c2 1.3 4.4 2.04 6.97 2.04 8.35.0 12.92-6.92 12.92-12.93.0-.2.0-.4-.02-.6.9-.63 1.96-1.22 2.56-2.14z"/></svg></span></a><a class="share-link share-email" href="mailto:?subject=Share&amp;body=%2fblog%2fvim-openfoam-power-part2%2f" target=_self rel=noopener aria-label="share email"><span aria-hidden=true class=share-icon><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M22 4H2C.9 4 0 4.9.0 6v12c0 1.1.9 2 2 2h20c1.1.0 2-.9 2-2V6c0-1.1-.9-2-2-2zM7.25 14.43l-3.5 2c-.08.05-.17.07-.25.07-.17.0-.34-.1-.43-.25-.14-.24-.06-.55.18-.68l3.5-2c.24-.14.55-.06.68.18.14.24.06.55-.18.68zm4.75.07c-.1.0-.2-.03-.27-.08l-8.5-5.5c-.23-.15-.3-.46-.15-.7.15-.22.46-.3.7-.14L12 13.4l8.23-5.32c.23-.15.54-.08.7.15.14.23.07.54-.16.7l-8.5 5.5c-.08.04-.17.07-.27.07zm8.93 1.75c-.1.16-.26.25-.43.25-.08.0-.17-.02-.25-.07l-3.5-2c-.24-.13-.32-.44-.18-.68s.44-.32.68-.18l3.5 2c.24.13.32.44.18.68z"/></svg></span></a><a class="share-link share-reddit" href="https://reddit.com/submit/?url=%2fblog%2fvim-openfoam-power-part2%2f&amp;resubmit=true&amp;title=Share" target=_blank rel=noopener aria-label="share reddit"><span aria-hidden=true class=share-icon><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M24 11.5c0-1.65-1.35-3-3-3-.96.0-1.86.48-2.42 1.24-1.64-1-3.75-1.64-6.07-1.72.08-1.1.4-3.05 1.52-3.7.72-.4 1.73-.24 3 .5C17.2 6.3 18.46 7.5 20 7.5c1.65.0 3-1.35 3-3s-1.35-3-3-3c-1.38.0-2.54.94-2.88 2.22-1.43-.72-2.64-.8-3.6-.25-1.64.94-1.95 3.47-2 4.55-2.33.08-4.45.7-6.1 1.72C4.86 8.98 3.96 8.5 3 8.5c-1.65.0-3 1.35-3 3 0 1.32.84 2.44 2.05 2.84-.03.22-.05.44-.05.66.0 3.86 4.5 7 10 7s10-3.14 10-7c0-.22-.02-.44-.05-.66 1.2-.4 2.05-1.54 2.05-2.84zM2.3 13.37C1.5 13.07 1 12.35 1 11.5c0-1.1.9-2 2-2 .64.0 1.22.32 1.6.82-1.1.85-1.92 1.9-2.3 3.05zm3.7.13c0-1.1.9-2 2-2s2 .9 2 2-.9 2-2 2-2-.9-2-2zm9.8 4.8c-1.08.63-2.42.96-3.8.96-1.4.0-2.74-.34-3.8-.95-.24-.13-.32-.44-.2-.68.15-.24.46-.32.7-.18 1.83 1.06 4.76 1.06 6.6.0.23-.13.53-.05.67.2.14.23.06.54-.18.67zm.2-2.8c-1.1.0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm5.7-2.13c-.38-1.16-1.2-2.2-2.3-3.05.38-.5.97-.82 1.6-.82 1.1.0 2 .9 2 2 0 .84-.53 1.57-1.3 1.87z"/></svg></span></a></div></div></div><div class=mt-20><div id=disqus_thread></div><script type=application/javascript>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//themefisher-template.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div></article></div><div class="section pb-0"><h2 class="h3 mb-12">Related Posts</h2><div class=row><div class=lg:col-4><div class="bg-body dark:bg-darkmode-body"><picture><source srcset=/images/openfoam-pressure-permeability-results_hu8926a4d0f16743ed164258e025fc6888_122180_545x0_resize_q90_h2_lanczos_3.webp media="(max-width: 575px)"><source srcset=/images/openfoam-pressure-permeability-results_hu8926a4d0f16743ed164258e025fc6888_122180_600x0_resize_q90_h2_lanczos_3.webp media="(max-width: 767px)"><source srcset=/images/openfoam-pressure-permeability-results_hu8926a4d0f16743ed164258e025fc6888_122180_700x0_resize_q90_h2_lanczos_3.webp media="(max-width: 991px)"><source srcset=/images/openfoam-pressure-permeability-results_hu8926a4d0f16743ed164258e025fc6888_122180_1110x0_resize_q90_h2_lanczos_3.webp><img loading=lazy decoding=async src=/images/openfoam-pressure-permeability-results_hu8926a4d0f16743ed164258e025fc6888_122180_1110x0_resize_lanczos_3.png class="mb-6 w-full rounded img" alt="Permeability Simulation with OPENFOAM and OPENPNM" width=767 height=424></picture><h4 class=mb-3><a href=/blog/permeability-simulation-with-openfoam-and-openpnm/>Permeability Simulation with OPENFOAM and OPENPNM</a></h4><ul class=mb-4><li class="mr-4 inline-block"><a href=/authors/mohammed-elwardi-fadeli/><i class="fa-regular fa-circle-user mr-2"></i>Mohammed Elwardi Fadeli</a></li><li class="mr-4 inline-block"><i class="fa-regular fa-folder mr-2"></i>
<a href=/categories/porous-medium/ class=ms-1>Porous medium</a></li></ul><p class=mb-6>Permeability and Filtration coefficients are some must-know factors for oil/gas reservoir management and optimization.</p><a class="btn btn-outline-primary btn-sm" href=/blog/permeability-simulation-with-openfoam-and-openpnm/>Read More</a></div></div><div class=lg:col-4><div class="bg-body dark:bg-darkmode-body"><picture><source srcset=/images/vim-openfoam_hu2ee0a4cb629d438b90e279549678bc92_82586_545x0_resize_q90_h2_lanczos_3.webp media="(max-width: 575px)"><source srcset=/images/vim-openfoam_hu2ee0a4cb629d438b90e279549678bc92_82586_600x0_resize_q90_h2_lanczos_3.webp media="(max-width: 767px)"><source srcset=/images/vim-openfoam_hu2ee0a4cb629d438b90e279549678bc92_82586_700x0_resize_q90_h2_lanczos_3.webp media="(max-width: 991px)"><source srcset=/images/vim-openfoam_hu2ee0a4cb629d438b90e279549678bc92_82586_1110x0_resize_q90_h2_lanczos_3.webp><img loading=lazy decoding=async src=/images/vim-openfoam_hu2ee0a4cb629d438b90e279549678bc92_82586_1110x0_resize_lanczos_3.png class="mb-6 w-full rounded img" alt="Customize VIM to work efficiently with OpenFOAM - Part 1" width=725 height=431></picture><h4 class=mb-3><a href=/blog/vim-openfoam-power-part1/>Customize VIM to work efficiently with OpenFOAM - Part 1</a></h4><ul class=mb-4><li class="mr-4 inline-block"><a href=/authors/mohammed-elwardi-fadeli/><i class="fa-regular fa-circle-user mr-2"></i>Mohammed Elwardi Fadeli</a></li><li class="mr-4 inline-block"><i class="fa-regular fa-folder mr-2"></i>
<a href=/categories/productivity/ class=ms-1>Productivity</a></li></ul><p class=mb-6>Today, I&rsquo;m starting a new (short) post series suggesting tricks to customize the VIM text editor so that it can be used to edit OpenFOAM cases more efficiently.</p><a class="btn btn-outline-primary btn-sm" href=/blog/vim-openfoam-power-part1/>Read More</a></div></div><div class=lg:col-4><div class="bg-body dark:bg-darkmode-body"><picture><source srcset=/images/forAll-openfoam-cpp_hu9adf402e5ea58479103080fa88241038_52836_545x0_resize_q90_h2_lanczos_3.webp media="(max-width: 575px)"><source srcset=/images/forAll-openfoam-cpp_hu9adf402e5ea58479103080fa88241038_52836_600x0_resize_q90_h2_lanczos_3.webp media="(max-width: 767px)"><source srcset=/images/forAll-openfoam-cpp_hu9adf402e5ea58479103080fa88241038_52836_700x0_resize_q90_h2_lanczos_3.webp media="(max-width: 991px)"><source srcset=/images/forAll-openfoam-cpp_hu9adf402e5ea58479103080fa88241038_52836_1110x0_resize_q90_h2_lanczos_3.webp><img loading=lazy decoding=async src=/images/forAll-openfoam-cpp_hu9adf402e5ea58479103080fa88241038_52836_1110x0_resize_lanczos_3.png class="mb-6 w-full rounded img" alt="The forAll Macro in OpenFOAM" width=675 height=392></picture><h4 class=mb-3><a href=/blog/the-forall-macro-in-openfoam/>The forAll Macro in OpenFOAM</a></h4><ul class=mb-4><li class="mr-4 inline-block"><a href=/authors/mohammed-elwardi-fadeli/><i class="fa-regular fa-circle-user mr-2"></i>Mohammed Elwardi Fadeli</a></li><li class="mr-4 inline-block"><i class="fa-regular fa-folder mr-2"></i>
<a href=/categories/programming/ class=ms-1>Programming</a></li></ul><p class=mb-6>Because of the frequent use of range-like loops in OpenFOAM (in the official code base, forks, and any independent work, for that matter), the developers have provided a &ldquo;shortcut&rdquo; to loop through all elements of a list—any list.</p><a class="btn btn-outline-primary btn-sm" href=/blog/the-forall-macro-in-openfoam/>Read More</a></div></div></div></div></div></section></main><footer class="bg-theme-light dark:bg-darkmode-theme-light"><div class=container><div class="row items-center py-10"><div class="lg:col-3 mb-8 text-center lg:mb-0 lg:text-left"><a class="navbar-brand inline-block" href=/><img fetchpriority=high decoding=async class="img logo-light" width=160 height=32 src=/images/logo_hu2ea1f536cd8a3d9765009a4dbd549167_7163_320x0_resize_q90_h2_lanczos_3.webp alt=FoamScience onerror='this.onerror=null,this.src="/images/logo_hu2ea1f536cd8a3d9765009a4dbd549167_7163_320x0_resize_lanczos_3.png"'>
<img fetchpriority=high decoding=async class="img logo-dark" width=160 height=32 src=/images/logo-darkmode_hub75990a2c9eb01f034c9bf9f242d1f22_9732_320x0_resize_q90_h2_lanczos_3.webp alt=FoamScience onerror='this.onerror=null,this.src="/images/logo-darkmode_hub75990a2c9eb01f034c9bf9f242d1f22_9732_320x0_resize_lanczos_3.png"'></a></div><div class="lg:col-6 mb-8 text-center lg:mb-0"><ul><li class="m-3 inline-block"><a href=/about/>About</a></li><li class="m-3 inline-block"><a href=/privacy-policy/>Privacy Policy</a></li></ul></div><div class="lg:col-3 mb-8 text-center lg:mb-0 lg:mt-0 lg:text-right"><ul class=social-icons><li><a target=_blank aria-label=X rel="nofollow noopener" href=https://twitter.com/><i class="fab fa-twitter"></i></a></li><li><a target=_blank aria-label=github rel="nofollow noopener" href=https://www.github.com/><i class="fab fa-github"></i></a></li><li><a target=_blank aria-label=linkedin rel="nofollow noopener" href=https://www.linkedin.com/><i class="fab fa-linkedin"></i></a></li></ul></div></div></div><div class="border-border dark:border-darkmode-border border-t py-7"><div class="text-light dark:text-darkmode-light container text-center"><p>© 2019-2023 <strong>Mohammed Elwardi Fadeli</strong>, Theme designed by <a href=https://zeon.studio target=_blank>Zeon Studio</a></p></div></div></footer><script crossorigin=anonymous integrity="sha256-HNtb4dMoWbNSeb1hh0/oFX85kBGiQY0bSBeOphsFH2s=" src=/js/scripts.min.1cdb5be1d32859b35279bd61874fe8157f399011a2418d1b48178ea61b051f6b.js></script>
<script crossorigin=anonymous integrity="sha256-B6xkgfh/Kvqv5KhwfzCl2bDxX83d75UmDJHTJqlOs3M=" src=/js/scripts-lazy.min.07ac6481f87f2afaafe4a8707f30a5d9b0f15fcdddef95260c91d326a94eb373.js defer></script>
<script>"serviceWorker"in navigator&&navigator.serviceWorker.register("/service-worker.js")</script></body></html>