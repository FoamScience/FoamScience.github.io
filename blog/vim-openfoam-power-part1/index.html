<!doctype html><html itemscope lang=en-us itemtype=http://schema.org/WebPage><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=5"><meta name=theme-name content="hugoplate"><link rel="shortcut icon" href=/images/favicon_hueb84ecec72665a83aae8c940dfe71474_1906_96x0_resize_lanczos_3.png type=image/x-icon><link rel=icon href=/images/favicon_hueb84ecec72665a83aae8c940dfe71474_1906_96x0_resize_lanczos_3.png type=image/x-icon><link rel=icon type=image/png sizes=48x48 href=/images/favicon_hueb84ecec72665a83aae8c940dfe71474_1906_48x0_resize_lanczos_3.png><link rel=icon type=image/png sizes=96x96 href=/images/favicon_hueb84ecec72665a83aae8c940dfe71474_1906_96x0_resize_lanczos_3.png><link rel=apple-touch-icon sizes=144x144 href=/images/favicon_hueb84ecec72665a83aae8c940dfe71474_1906_144x0_resize_lanczos_3.png><link rel=manifest href=/manifest.webmanifest><meta name=msapplication-TileColor content="#ddd"><meta name=theme-color content="#ffffff"><title>Customize VIM to work efficiently with OpenFOAM - Part 1</title><meta name=generator content="Hugo 0.119.0"><meta name=keywords content="OpenFOAM,CFD,FVM,Numerical Simulation"><meta name=description content="Working with OpenFOAM case files gets really tedious if the text editor is not selected properly; and with VIM I still feel like missing some features, that's why customizing VIM for such tasks is the best path to take"><meta name=author content="elwardi"><meta property="og:image" content="/images/vim-openfoam.png"><meta name=twitter:image content="/images/vim-openfoam.png"><meta name=twitter:card content="summary
            _large_image
          "><meta property="og:image:width" content="725"><meta property="og:image:height" content="431"><meta property="og:image:type" content="image/
        .png
      "><meta property="og:title" content="Customize VIM to work efficiently with OpenFOAM - Part 1"><meta property="og:description" content="Working with OpenFOAM case files gets really tedious if the text editor is not selected properly; and with VIM I still feel like missing some features, that's why customizing VIM for such tasks is the best path to take"><meta property="og:type" content="website"><meta property="og:url" content="/blog/vim-openfoam-power-part1/"><meta name=twitter:title content="Customize VIM to work efficiently with OpenFOAM - Part 1"><meta name=twitter:description content="Working with OpenFOAM case files gets really tedious if the text editor is not selected properly; and with VIM I still feel like missing some features, that's why customizing VIM for such tasks is the best path to take"><script>let indexURL="/searchindex.json",includeSectionsInSearch=["blog"],no_results_for="No results for",empty_search_results_placeholder="Type something to search.."</script><meta http-equiv=x-dns-prefetch-control content="on"><link rel=preconnect href=https://use.fontawesome.com crossorigin><link rel=preconnect href=//cdnjs.cloudflare.com><link rel=preconnect href=//www.googletagmanager.com><link rel=preconnect href=//www.google-analytics.com><link rel=dns-prefetch href=https://use.fontawesome.com><link rel=dns-prefetch href=//ajax.googleapis.com><link rel=dns-prefetch href=//cdnjs.cloudflare.com><link rel=dns-prefetch href=//www.googletagmanager.com><link rel=dns-prefetch href=//www.google-analytics.com><link rel=dns-prefetch href=//fonts.googleapis.com><link rel=dns-prefetch href=//connect.facebook.net><link rel=dns-prefetch href=//platform.linkedin.com><link rel=dns-prefetch href=//platform.twitter.com><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Jost:wght@400;600&family=Signika:wght@500;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script><link href="/css/style.min.aef7813edcc9c7ea0a59f7ae9cba8cd994190d6f06d968f220acfeeccfb403d5.css" integrity="sha256-rveBPtzJx+oKWfeunLqM2ZQZDW8G2WjyIKz+7M+0A9U=" rel=stylesheet><link rel=stylesheet href="/css/style-lazy.min.4c48e17a528890f22b953b1920d800714a9fb552377a78f3aba89b45e2e6ad4a.css" integrity="sha256-TEjhelKIkPIrlTsZINgAcUqftVI3enjzq6ibReLmrUo=" media=print onload='this.media="all",this.onload=null'></head><body><header class="header sticky top-0 z-30"><nav class="navbar container"><div class=order-0><a class="navbar-brand block" href=/><img fetchpriority=high decoding=async class="img logo-light" width=160 height=32 src=/images/logo_hu2ea1f536cd8a3d9765009a4dbd549167_7163_320x0_resize_q90_h2_lanczos_3.webp alt=FoamScience onerror='this.onerror=null,this.src="/images/logo_hu2ea1f536cd8a3d9765009a4dbd549167_7163_320x0_resize_lanczos_3.png"'>
<img fetchpriority=high decoding=async class="img logo-dark" width=160 height=32 src=/images/logo-darkmode_hub75990a2c9eb01f034c9bf9f242d1f22_9732_320x0_resize_q90_h2_lanczos_3.webp alt=FoamScience onerror='this.onerror=null,this.src="/images/logo-darkmode_hub75990a2c9eb01f034c9bf9f242d1f22_9732_320x0_resize_lanczos_3.png"'></a></div><input id=nav-toggle type=checkbox class=hidden>
<label for=nav-toggle class="order-3 cursor-pointer flex items-center lg:hidden text-dark dark:text-white lg:order-1"><svg id="show-button" class="h-6 fill-current block" viewBox="0 0 20 20"><title>Menu Open</title><path d="M0 3h20v2H0V3zm0 6h20v2H0V9zm0 6h20v2H0V0z"/></svg><svg id="hide-button" class="h-6 fill-current hidden" viewBox="0 0 20 20"><title>Menu Close</title><polygon points="11 9 22 9 22 11 11 11 11 22 9 22 9 11 -2 11 -2 9 9 9 9 -2 11 -2" transform="rotate(45 10 10)"/></svg></label><ul id=nav-menu class="navbar-nav order-3 hidden lg:flex w-full pb-6 lg:order-1 lg:w-auto lg:space-x-2 lg:pb-0 xl:space-x-8"><li class=nav-item><a class=nav-link href=/>Home</a></li><li class=nav-item><a class=nav-link href=/about/>About</a></li><li class=nav-item><a class=nav-link href=/blog/>Blog</a></li><li class=nav-item><a class=nav-link href=/authors/>Authors</a></li><li class=nav-item><a class=nav-link href=/categories/>Categories</a></li><li class=nav-item><a class=nav-link href=/projects/>Projects</a></li></ul><div class="order-1 ml-auto flex items-center md:order-2 lg:ml-0"><button aria-label=search class="border-border text-dark hover:text-primary dark:border-darkmode-border mr-5 inline-block border-r pr-5 text-xl dark:text-white" data-target=search-modal>
<i class="fa-solid fa-search"></i></button><div class="theme-switcher mr-5"><input id=theme-switcher data-theme-switcher type=checkbox>
<label for=theme-switcher><span class=sr-only>theme switcher</span>
<span><svg class="absolute left-[4px] top-[4px] z-10 opacity-100 dark:opacity-0" viewBox="0 0 56 56" fill="#fff" height="16" width="16"><path d="M30 4.6c0-1-.9-2-2-2a2 2 0 00-2 2v5c0 1 .9 2 2 2s2-1 2-2zm9.6 9a2 2 0 000 2.8c.8.8 2 .8 2.9.0L46 13a2 2 0 000-2.9 2 2 0 00-3 0zm-26 2.8c.7.8 2 .8 2.8.0.8-.7.8-2 0-2.9L13 10c-.7-.7-2-.8-2.9.0-.7.8-.7 2.1.0 3zM28 16A12 12 0 0016 28a12 12 0 0012 12 12 12 0 0012-12A12 12 0 0028 16zm23.3 14c1.1.0 2-.9 2-2s-.9-2-2-2h-4.9a2 2 0 00-2 2c0 1.1 1 2 2 2zM4.7 26a2 2 0 00-2 2c0 1.1.9 2 2 2h4.9c1 0 2-.9 2-2s-1-2-2-2zm37.8 13.6a2 2 0 00-3 0 2 2 0 000 2.9l3.6 3.5a2 2 0 002.9.0c.8-.8.8-2.1.0-3zM10 43.1a2 2 0 000 2.9c.8.7 2.1.8 3 0l3.4-3.5c.8-.8.8-2.1.0-2.9s-2-.8-2.9.0zm20 3.4c0-1.1-.9-2-2-2a2 2 0 00-2 2v4.9c0 1 .9 2 2 2s2-1 2-2z"/></svg><svg class="absolute left-[4px] top-[4px] z-10 opacity-0 dark:opacity-100" viewBox="0 0 24 24" fill="none" height="16" width="16"><path fill="#000" fill-rule="evenodd" clip-rule="evenodd" d="M8.2 2.2c1-.4 2 .6 1.6 1.5-1 3-.4 6.4 1.8 8.7a8.4 8.4.0 008.7 1.8c1-.3 2 .5 1.5 1.5v.1A10.3 10.3.0 0112.4 22 10.3 10.3.0 013.2 6.7c1-2 2.9-3.5 4.9-4.4z"/></svg></span></label></div><script>var darkMode=!0,themeSwitch;localStorage.getItem("theme")==="dark"?darkMode=!0:localStorage.getItem("theme")==="light"&&(darkMode=!1),darkMode&&document.documentElement.classList.toggle("dark"),themeSwitch=document.querySelectorAll("[data-theme-switcher]"),document.addEventListener("DOMContentLoaded",()=>{[].forEach.call(themeSwitch,function(e){e.checked=!!darkMode,e.addEventListener("click",()=>{document.documentElement.classList.toggle("dark"),localStorage.setItem("theme",document.documentElement.classList.contains("dark")?"dark":"light")})})})</script></div></nav></header><div class="search-wrapper search-modal" data-image=true data-description=true data-tags=true data-categories=true tabindex=-1 aria-hidden=true style=--color-primary:#121212><div class=search-wrapper-content><div class=search-input-body><label for=search-modal-input style=margin-top:-1px><span class=sr-only>search icon</span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" height="18" width="18" class="search-icon" data-type="search"><path fill="currentcolor" d="M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8.0 45.3s-32.8 12.5-45.3.0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9.0 208S93.1.0 208 0 416 93.1 416 208zM208 352a144 144 0 100-288 144 144 0 100 288z"/></svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" height="18" width="18" class="search-reset" data-type="reset"><path fill="currentcolor" d="M256 512A256 256 0 10256 0a256 256 0 100 512zM175 175c9.4-9.4 24.6-9.4 33.9.0l47 47 47-47c9.4-9.4 24.6-9.4 33.9.0s9.4 24.6.0 33.9l-47 47 47 47c9.4 9.4 9.4 24.6.0 33.9s-24.6 9.4-33.9.0l-47-47-47 47c-9.4 9.4-24.6 9.4-33.9.0s-9.4-24.6.0-33.9l47-47-47-47c-9.4-9.4-9.4-24.6.0-33.9z"/></svg></label>
<input id=search-modal-input type=text data-search-input autocomplete=off aria-label=Search placeholder="Search Post ..."></div><div class=search-wrapper-body><div class=search-result data-search-result></div><span class=search-result-empty>Type something to search..</span></div><div class=search-wrapper-footer><span><kbd><svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" fill="currentcolor" style="margin-top:-2px" viewBox="0 0 16 16"><path d="M3.204 11h9.592L8 5.519 3.204 11zm-.753-.659 4.796-5.48a1 1 0 011.506.0l4.796 5.48c.566.647.106 1.659-.753 1.659H3.204a1 1 0 01-.753-1.659z"/></svg></kbd><kbd><svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" fill="currentcolor" style="margin-top:1px" viewBox="0 0 16 16"><path d="M3.204 5h9.592L8 10.481 3.204 5zm-.753.659 4.796 5.48a1 1 0 001.506.0l4.796-5.48c.566-.647.106-1.659-.753-1.659H3.204a1 1 0 00-.753 1.659z"/></svg></kbd>to navigate</span>
<span><kbd><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" fill="currentcolor" style="display:inline-block" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M14.5 1.5a.5.5.0 01.5.5v4.8a2.5 2.5.0 01-2.5 2.5H2.707l3.347 3.346a.5.5.0 01-.708.708l-4.2-4.2a.5.5.0 010-.708l4-4a.5.5.0 11.708.708L2.707 8.3H12.5A1.5 1.5.0 0014 6.8V2a.5.5.0 01.5-.5z"/></svg></kbd>to select</span>
<span class=search-result-info></span>
<span data-target=close-search-modal><kbd>ESC</kbd> to close</span></div></div></div><main><section class="section pt-7"><div class=container><div class="row justify-center"><article class=lg:col-10><div class=mb-10><picture><source srcset=/images/vim-openfoam_hu2ee0a4cb629d438b90e279549678bc92_82586_545x0_resize_q90_h2_lanczos_3.webp media="(max-width: 575px)"><source srcset=/images/vim-openfoam_hu2ee0a4cb629d438b90e279549678bc92_82586_600x0_resize_q90_h2_lanczos_3.webp media="(max-width: 767px)"><source srcset=/images/vim-openfoam_hu2ee0a4cb629d438b90e279549678bc92_82586_700x0_resize_q90_h2_lanczos_3.webp media="(max-width: 991px)"><source srcset=/images/vim-openfoam_hu2ee0a4cb629d438b90e279549678bc92_82586_1110x0_resize_q90_h2_lanczos_3.webp><img loading=lazy decoding=async src=/images/vim-openfoam_hu2ee0a4cb629d438b90e279549678bc92_82586_1110x0_resize_lanczos_3.png class="w-full rounded img" alt="Customize VIM to work efficiently with OpenFOAM - Part 1" width=725 height=431></picture></div><h1 class="h2 mb-4">Customize VIM to work efficiently with OpenFOAM - Part 1</h1><ul class=mb-4><li class="mr-4 inline-block"><a href=/authors/mohammed-elwardi-fadeli/><i class="fa-regular fa-circle-user mr-2"></i>Mohammed Elwardi Fadeli</a></li><li class="mr-4 inline-block"><i class="fa-regular fa-folder mr-2"></i>
<a href=/categories/productivity/ class=ms-1>Productivity</a></li><li class="mr-4 inline-block"><i class="fa-regular fa-clock mr-2"></i>
August 27, 2018</li></ul><div class="content mb-10"><p>Today, I&rsquo;m starting a new (short) post series suggesting tricks to customize the <strong>VIM</strong> text editor so that it can be used to edit OpenFOAM cases more efficiently. Of course, making VIM work optimally with every single piece of software you have installed through scripting is a bit of an &ldquo;overkill,&rdquo; but having it configured properly is crucial.</p><div class="notice note"><div class=notice-head><svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M10 9v5m0 5c-4.97056.0-9-4.0294-9-9 0-4.97056 4.02944-9 9-9 4.9706.0 9 4.02944 9 9 0 4.9706-4.0294 9-9 9zM10.0498 6V6.1L9.9502 6.1002V6H10.0498z" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg><p>Note</p></div><div class=notice-body><p>These series of posts are for those who are ready to write some lines of VIML
code to add interesting functionality to VIM (OpenFOAM-wise).</p></div></div><div class="notice warning"><div class=notice-head><svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path fillRule="evenodd" clipRule="evenodd" d="M10 0c5.522.0 10 4.478 10 10S15.522 20 10 20 0 15.522.0 10 4.478.0 10 0zm0 2C5.589 2 2 5.589 2 10s3.589 8 8 8 8-3.589 8-8-3.589-8-8-8zm2.293 4.293 1.414 1.414L11.414 10l2.293 2.293-1.414 1.414L10 11.414 7.707 13.707 6.293 12.293 8.586 10 6.293 7.707 7.707 6.293 10 8.586l2.293-2.293z" fill="currentcolor"/></svg><p>Warning</p></div><div class=notice-body><p><p>This post is outdated; there are better ways to efficiently edit OpenFOAM files with (Neo)Vim:</p><ul><li><a href=https://github.com/FoamScience/tree-sitter-foam target=_blank><strong>tree-sitter-foam</strong></a>
: OpenFOAM syntax highlighting using tree-sitter for NeoVim.</li><li><a href=https://github.com/FoamScience/foam-language-server target=_blank><strong>foam-language-server</strong></a>
: A language server for OpenFOAM files.</li></ul></p></div></div><h2 id=vim-plugins-for-openfoam>VIM Plugins for OpenFOAM</h2><p>We can easily customize our VIM installation using our own scripts, sourced in the <code>.vimrc</code> file. The versatility of VIM allows for sharing these scripts between users; we then call the scripts: <em>Plug-ins</em>.</p><p>These plugins differ in both their goal and their implementation:</p><ul><li>General purpose plugins, e.g., for handling text formatting, VIM configuration.</li><li>File-Type specific plugins, e.g., those which operate only on C source/header files.</li><li>Syntax highlighting, e.g., highlight OpenFOAM keywords in an OpenFOAM dictionary.</li><li>Compiler plugins, e.g., interpret a Python script from VIM command line and jump to errors.</li></ul><p>As OpenFOAM users, we&rsquo;ll naturally be interested in any C++ related plugins in addition to a few OpenFOAM-specific ones.</p><h3 id=syntax-highlighting-of-openfoam-dictionaries-in-vim>Syntax Highlighting of OPENFOAM dictionaries in VIM</h3><p>It&rsquo;s always good to have keyword-specific highlighting of a file; It helps you instantly catch misspelled keywords, it makes understanding the file easier; and with appropriate color themes, it makes you feel comfortable while editing the file.</p><p>There is already a VIM plugin that takes care of OpenFOAM keywords highlighting (Vim-OpenFOAM-syntax). It&rsquo;s true that the plugin does some weird stuff (eg. loading weird files into the buffer list) but, in general, it&rsquo;s good for the job of highlighting OpenFOAM syntax. To install it on your system, follow the instructions at <a href=https://github.com/effi/vim-OpenFoam-syntax target=_blank>Vim-OpenFoam-syntax</a>
on github, or the fork for manual installation (not that scary) <a href=https://bitbucket.org/shor-ty/vimextensionopenfoam target=_blank>Vim-Extension-OpenFOAM</a>
on bitbucket.</p><p>While programming, I usually use a couple of VIM plugins:</p><ul><li><em>c-support</em>: to turn VIM into a C/C++ IDE (code snippets &mldr; etc).</li><li><em>taglist</em>: to browse source code efficiently</li></ul><h2 id=your-own-vim-scripts>Your own VIM scripts</h2><p>In this blog post, we&rsquo;ll write a very small VIM script called <code>customFoam.vim</code>, which is capable of doing a couple of things:</p><ul><li>It needs to be aware of the current file&rsquo;s FileType.</li><li>When the file is of type <code>foam</code>, VIM should set a couple of things up:<ul><li>Changing the path variable for the <code>:find</code> command so it includes our case&rsquo;s directory.</li><li>Changing VIM&rsquo;s current directory to the case directory.</li></ul></li><li>At this moment, that&rsquo;s all, but we&rsquo;ll add some stuff in the upcoming blog posts.</li></ul><h3 id=first-steps-determining-file-types>First steps: Determining file types</h3><p>There are two common ways to determine a file type for a file:</p><ul><li>Use the extension in its same; I call it the <code>lazy Windows way</code>: for example ,files that have names ending with <code>.html</code> are considered HTML files no matter what their content is.</li><li>Take a look at the file&rsquo;s content then decide; This is the Unix way, which we&rsquo;ll be using here: It just means we&rsquo;ll search the content of a file for the line that says <code>FoamFile</code>.</li></ul><p>We are not the first ones who try to detect <code>foam</code> file type in VIM; the <em>vim-OpenFoam-syntax</em> plugin already does that. Actually, it assigns different file types for different <code>foam</code> files. For example, it sets: <code>ft="foam256_thermodynamicProperties"</code> for <code>thermodynamicProperties</code> dictionaries, but in general, its sets the file type to <code>foam256_general</code>.</p><p>Thus, if you have the plugin installed, you already have the required means to detect <code>foam</code> file type. However, for the sake of leaning VIM, we&rsquo;ll illustrate a very quick way to do it (but not that efficient!).</p><p>All what we have to do is to write a small script -which contains only one function- searching the first few lines of a file for the keyword <code>FoamFile</code>.
This tells VIM that the file is a <code>OpenFOAM Dictionary File</code>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-vim data-lang=vim><span style=display:flex><span><span style=color:#75715e>&#34; Filename: foamFT.vim</span>
</span></span><span style=display:flex><span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e>&#34; No debug stuff</span>
</span></span><span style=display:flex><span><span style=color:#75715e>&#34; Should check if the file type is already set</span>
</span></span><span style=display:flex><span><span style=color:#75715e>&#34; But it&#39;s OK; just set it again</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span>! <span style=color:#a6e22e>SetFoamType</span>()
</span></span><span style=display:flex><span><span style=color:#75715e>    &#34; loop through the first 10 lines</span>
</span></span><span style=display:flex><span><span style=color:#75715e>    &#34; FoamFile is at line 8 usually</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>for</span> <span style=color:#a6e22e>nL</span> <span style=color:#a6e22e>in</span> <span style=color:#a6e22e>range</span>(<span style=color:#ae81ff>1</span>,<span style=color:#ae81ff>10</span>)
</span></span><span style=display:flex><span><span style=color:#75715e>    &#34; match &#39;FoamFile&#39;</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>getline</span>(<span style=color:#a6e22e>nL</span>) =~ <span style=color:#e6db74>&#39;FoamFile&#39;</span>)
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>setfiletype</span> <span style=color:#a6e22e>foam</span>
</span></span><span style=display:flex><span><span style=color:#75715e>            &#34; if file type is set, leave the loop</span>
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>break</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>endif</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>endfor</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>endfunction</span>
</span></span><span style=display:flex><span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e>&#34; That&#39;s it!</span>
</span></span><span style=display:flex><span><span style=color:#75715e>&#34; Now, when to call it?</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>augroup</span> <span style=color:#a6e22e>FOAMFTautocmds</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>autocmd</span>!
</span></span><span style=display:flex><span><span style=color:#66d9ef>autocmd</span> <span style=color:#a6e22e>BufRead</span> * <span style=color:#a6e22e>call</span> <span style=color:#a6e22e>SetFoamType</span>()
</span></span><span style=display:flex><span><span style=color:#a6e22e>augroup</span> <span style=color:#a6e22e>End</span>
</span></span></code></pre></div><p>To check whether the script works or not; Just execute the ex-command <code>:set ft</code> while an OpenFOAM dictionary is loaded. If it works, the output should say <em>filetype=foam</em>.</p><h3 id=now-we-know-the-filetype-then-what>Now we know the filetype, then what?</h3><p>Well, <strong>VIM</strong> knows <em>what</em> we are editing, but it doesn&rsquo;t know <em>where</em> we are editing it. In fact, it does know the exact path to the current file (try running the ex-command <code>:pwd</code>): VIM considers the startup directory as your current directory, and to change it, guess what, we have to use the <code>:cd</code> (change directory!) command.</p><p>If you invoke VIM from the case directory, you&rsquo;ll have the advantage of file names auto-completion in command-line mode; that is, when you type <code>:e c&lt;TAB></code>, VIM automatically completes <em>constant</em> for you. But, if, for example, you invoke it from the system directory of a case, it won&rsquo;t know about the files in the other directories (<em>0</em>, <em>constant</em>, etc.).</p><p>There&rsquo;s also the super-useful command <code>:find</code> which finds the specified file in the path (could include multiple independent directories) and then edits it. The desired workflow can be summarized as follows: While editing <code>blockMeshDict</code> in the <em>system</em> directory of a case, type <code>:find t&lt;TAB></code>, which instantly expands to <code>:find transportProperties</code> (Note that this file is located under the <em>constant</em> directory), then, hitting <em>ENTER</em> switches to that file to edit it.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-vim data-lang=vim><span style=display:flex><span><span style=color:#75715e>&#34; Filename: customFoam.vim</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span>! <span style=color:#a6e22e>FOAMSetPathToCaseDir</span>()
</span></span><span style=display:flex><span><span style=color:#75715e>    &#34; IF you care only for files in</span>
</span></span><span style=display:flex><span><span style=color:#75715e>    &#34; system, 0, and constant, use</span>
</span></span><span style=display:flex><span><span style=color:#75715e>    &#34; let caseDir = expand(&#39;%:p:h:h&#39;)</span>
</span></span><span style=display:flex><span><span style=color:#75715e>    &#34; But, I&#39;m a regexp lover, so,</span>
</span></span><span style=display:flex><span><span style=color:#75715e>    &#34; Make Vim remember everything in the path until case name.</span>
</span></span><span style=display:flex><span><span style=color:#75715e>    &#34; delete everything else!</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>caseDir</span> = <span style=color:#a6e22e>expand</span>(<span style=color:#e6db74>&#39;%:p:s?\(\/.*run\/[a-zA-Z1-9\. ]*\)\/.*?\1?&#39;</span>)
</span></span><span style=display:flex><span><span style=color:#75715e>    &#34; set path to include all subdirs of caseDir.</span>
</span></span><span style=display:flex><span><span style=color:#75715e>    &#34; you can also use &#39;=+&#39; instead of &#39;=&#39; to add the caseDir to</span>
</span></span><span style=display:flex><span><span style=color:#75715e>    &#34; the default path; but I like it this way.</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>exe</span> <span style=color:#e6db74>&#39;set path=&#39;</span>.<span style=color:#a6e22e>caseDir</span>.<span style=color:#e6db74>&#39;/**&#39;</span>
</span></span><span style=display:flex><span><span style=color:#75715e>    &#34; I want to run blockMesh, solvers and other tools</span>
</span></span><span style=display:flex><span><span style=color:#75715e>    &#34; Directly in VIM, so change dir to casedir</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>exe</span> <span style=color:#e6db74>&#39;cd &#39;</span>.<span style=color:#a6e22e>caseDir</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>endfunction</span>
</span></span><span style=display:flex><span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e>&#34; This is just incredible</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>augroup</span> <span style=color:#a6e22e>FOAMautocmds</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>autocmd</span>!
</span></span><span style=display:flex><span><span style=color:#66d9ef>autocmd</span> <span style=color:#a6e22e>FileType</span> <span style=color:#a6e22e>foam</span>* <span style=color:#a6e22e>call</span> <span style=color:#a6e22e>FOAMSetPathToCaseDir</span>()
</span></span><span style=display:flex><span><span style=color:#a6e22e>augroup</span> <span style=color:#a6e22e>End</span>
</span></span></code></pre></div><p>Let&rsquo;s go through that script line-by-line, shall we?</p><ul><li><p><code>function! FOAMSetPathToCaseDir()</code> overwrites any function defined with this name (Remember, user-defined function names start with a capital letter). <code>endfunction</code> denotes the end of function block.</p></li><li><p>All lines preceded with ( <code>"</code> ) are considered comments.</p></li><li><p>The line <code>let caseDir = expand('%:p:s?\(\/.*run\/[a-zA-Z1-9\. ]*\)\/.*?\1?')</code> needs deeper explanation:</p><ol><li>The standard function <code>let</code> defines Vim Variables (In this case, variables are local to the user-defined function).</li><li><em>caseDir</em> is the name of our variable (a string). It is local to the function: To use a global variable inside a function, name it <code>g:var</code>, to make it available only in this script, use <code>s:var</code>, and, in fact, to use a local variable in a function, it should be called <code>l:var</code>, but this is tolerated.</li><li>The standard function <code>expand</code> manipulates filenames (shortcut <em>%</em>) and paths to them, with modifiers:</li><li><code>:p</code> prints the whole absolute path to the file, eg. while editing <em>blockMeshDict</em>,
the ex-command <code>echo expand('%:p')</code> should display something like
<code>/home/path-to-case/system/blockMeshDict</code>.</li><li><code>:h</code> removes the last entry in a path, eg. <code>echo expand('%:p:h')</code> would display
<code>/home/path-to-case/system</code></li><li><code>:s?pattern?string?</code> acts like the substitute command. <em>pattern</em> is a regular expression, and <em>string</em> accepts <strong>back-references</strong>; All the power one needs in one command.</li><li>So, the regexp <code>\(\/.*run\/[a-zA-Z1-9\. ]*\)\/.*</code> remembers everything from the start of filename to &ldquo;run&rdquo; (hopefully, your OpenFOAM cases directory) to the first directory (that&rsquo;s the case dir. at least for me). Case Name may contain alphabet characters, digits, dots and spaces (The last two are really bad options). The rest of the path is forgotten (eg. /system/blockMeshDict).</li></ol></li></ul><p>This way, we can find our path to the case no matter what case file we are editing!</p><ul><li><p>In the line <code>exe 'set path='.caseDir.'/**'</code> , the command <code>exe</code> (short for <code>execute</code>) executes the following string as an ex-command. Concatenation in VIML is done with a dot, and because our <em>caseDir</em> variable is a string, and we are still inside the same function, it can be concatenated with other strings. The /** part expands to all sub-directories, to the last one of them, no matter how many levels of directories the case have.</p></li><li><p>The path variable is set so the <code>:find</code> command can help us a bit.</p></li><li><p>I like to change the directory to the case dir. so I can run commands directly from within VIM without worrying about which files I&rsquo;m editing, or the start-up directory. For that, we simply use the <code>:cd</code> ex-command (VIM&rsquo;s command).</p></li></ul><p>The function is completed, now, we have to find a way to automate calling it: <code>auto-commands</code>. Simply, we group all of our autocmds in a group called <code>FOAMautocmds</code> (Good practice but optional) .</p><ul><li><p><code>autocmd!</code> overwrites previous autocmds of this group (often abbreviated as <code>au!</code>).</p></li><li><p>We want to call the function when we open a file of type <code>foam*</code> (including <code>foam</code>, <code>foam_general</code>, etc.), so we write: <code>autocmd FileType foam* call FOAMSetPathToCaseDir()</code>
That&rsquo;s it, source the script in your <code>.vimrc</code> file, and you are good to test it out:</p></li><li><p>From the shell (from <code>/../constant/polyMesh</code> in an arbitrary OpenFOAM case, where the mesh is present) run <code>vim boundary</code>.</p></li><li><p>Now, in Vim, type <code>:fin tr&lt;TAB></code> (<code>fin</code> is a short form for <code>find</code>), then hit ENTER.</p></li><li><p>Check both the path and the working directory (using <code>:set path</code> and <code>:pwd</code> respectively).</p></li><li><p>You can issue <code>:!blockMesh</code> while editing the file to rebuild the mesh.</p></li></ul><p>That&rsquo;s it for now; the next post will explain ways to get the most out of VIM compilers to run <code>blockMesh</code> and OpenFOAM solvers on cases right from inside VIM and browse errors.</p></div><div class="row items-start justify-between"><div class="lg:col-5 mb-10 flex items-center lg:mb-0"><h5 class=mr-3>Tags :</h5><ul><li class=inline-block><a class="bg-theme-light hover:bg-primary dark:bg-darkmode-theme-light dark:hover:bg-darkmode-primary dark:hover:text-dark m-1 block rounded px-3 py-1 hover:text-white" href=/tags/openfoam/>Open foam</a></li><li class=inline-block><a class="bg-theme-light hover:bg-primary dark:bg-darkmode-theme-light dark:hover:bg-darkmode-primary dark:hover:text-dark m-1 block rounded px-3 py-1 hover:text-white" href=/tags/vim/>Vim</a></li></ul></div><div class="lg:col-4 flex items-center"><div class=share-icons><h5 class=share-title>Share :</h5><a class="share-link share-facebook" href="https://facebook.com/sharer/sharer.php?u=%2fblog%2fvim-openfoam-power-part1%2f" target=_blank rel=noopener aria-label="share facebook"><span class=share-icon><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18.77 7.46H14.5v-1.9c0-.9.6-1.1 1-1.1h3V.5h-4.33C10.24.5 9.5 3.44 9.5 5.32v2.15h-3v4h3v12h5v-12h3.85l.42-4z"/></svg></span></a><a class="share-link share-twitter" href="https://twitter.com/intent/tweet/?text=Share&amp;url=%2fblog%2fvim-openfoam-power-part1%2f" target=_blank rel=noopener aria-label="share twitter"><span aria-hidden=true class=share-icon><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M23.44 4.83c-.8.37-1.5.38-2.22.02.93-.56.98-.96 1.32-2.02-.88.52-1.86.9-2.9 1.1-.82-.88-2-1.43-3.3-1.43-2.5.0-4.55 2.04-4.55 4.54.0.36.03.7.1 1.04-3.77-.2-7.12-2-9.36-4.75-.4.67-.6 1.45-.6 2.3.0 1.56.8 2.95 2 3.77-.74-.03-1.44-.23-2.05-.57v.06c0 2.2 1.56 4.03 3.64 4.44-.67.2-1.37.2-2.06.08.58 1.8 2.26 3.12 4.25 3.16C5.78 18.1 3.37 18.74 1 18.46c2 1.3 4.4 2.04 6.97 2.04 8.35.0 12.92-6.92 12.92-12.93.0-.2.0-.4-.02-.6.9-.63 1.96-1.22 2.56-2.14z"/></svg></span></a><a class="share-link share-email" href="mailto:?subject=Share&amp;body=%2fblog%2fvim-openfoam-power-part1%2f" target=_self rel=noopener aria-label="share email"><span aria-hidden=true class=share-icon><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M22 4H2C.9 4 0 4.9.0 6v12c0 1.1.9 2 2 2h20c1.1.0 2-.9 2-2V6c0-1.1-.9-2-2-2zM7.25 14.43l-3.5 2c-.08.05-.17.07-.25.07-.17.0-.34-.1-.43-.25-.14-.24-.06-.55.18-.68l3.5-2c.24-.14.55-.06.68.18.14.24.06.55-.18.68zm4.75.07c-.1.0-.2-.03-.27-.08l-8.5-5.5c-.23-.15-.3-.46-.15-.7.15-.22.46-.3.7-.14L12 13.4l8.23-5.32c.23-.15.54-.08.7.15.14.23.07.54-.16.7l-8.5 5.5c-.08.04-.17.07-.27.07zm8.93 1.75c-.1.16-.26.25-.43.25-.08.0-.17-.02-.25-.07l-3.5-2c-.24-.13-.32-.44-.18-.68s.44-.32.68-.18l3.5 2c.24.13.32.44.18.68z"/></svg></span></a><a class="share-link share-reddit" href="https://reddit.com/submit/?url=%2fblog%2fvim-openfoam-power-part1%2f&amp;resubmit=true&amp;title=Share" target=_blank rel=noopener aria-label="share reddit"><span aria-hidden=true class=share-icon><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M24 11.5c0-1.65-1.35-3-3-3-.96.0-1.86.48-2.42 1.24-1.64-1-3.75-1.64-6.07-1.72.08-1.1.4-3.05 1.52-3.7.72-.4 1.73-.24 3 .5C17.2 6.3 18.46 7.5 20 7.5c1.65.0 3-1.35 3-3s-1.35-3-3-3c-1.38.0-2.54.94-2.88 2.22-1.43-.72-2.64-.8-3.6-.25-1.64.94-1.95 3.47-2 4.55-2.33.08-4.45.7-6.1 1.72C4.86 8.98 3.96 8.5 3 8.5c-1.65.0-3 1.35-3 3 0 1.32.84 2.44 2.05 2.84-.03.22-.05.44-.05.66.0 3.86 4.5 7 10 7s10-3.14 10-7c0-.22-.02-.44-.05-.66 1.2-.4 2.05-1.54 2.05-2.84zM2.3 13.37C1.5 13.07 1 12.35 1 11.5c0-1.1.9-2 2-2 .64.0 1.22.32 1.6.82-1.1.85-1.92 1.9-2.3 3.05zm3.7.13c0-1.1.9-2 2-2s2 .9 2 2-.9 2-2 2-2-.9-2-2zm9.8 4.8c-1.08.63-2.42.96-3.8.96-1.4.0-2.74-.34-3.8-.95-.24-.13-.32-.44-.2-.68.15-.24.46-.32.7-.18 1.83 1.06 4.76 1.06 6.6.0.23-.13.53-.05.67.2.14.23.06.54-.18.67zm.2-2.8c-1.1.0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm5.7-2.13c-.38-1.16-1.2-2.2-2.3-3.05.38-.5.97-.82 1.6-.82 1.1.0 2 .9 2 2 0 .84-.53 1.57-1.3 1.87z"/></svg></span></a></div></div></div><div class=mt-20><div id=disqus_thread></div><script type=application/javascript>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//themefisher-template.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div></article></div><div class="section pb-0"><h2 class="h3 mb-12">Related Posts</h2><div class=row><div class=lg:col-4><div class="bg-body dark:bg-darkmode-body"><picture><source srcset=/images/vim-openfoam_hu2ee0a4cb629d438b90e279549678bc92_82586_545x0_resize_q90_h2_lanczos_3.webp media="(max-width: 575px)"><source srcset=/images/vim-openfoam_hu2ee0a4cb629d438b90e279549678bc92_82586_600x0_resize_q90_h2_lanczos_3.webp media="(max-width: 767px)"><source srcset=/images/vim-openfoam_hu2ee0a4cb629d438b90e279549678bc92_82586_700x0_resize_q90_h2_lanczos_3.webp media="(max-width: 991px)"><source srcset=/images/vim-openfoam_hu2ee0a4cb629d438b90e279549678bc92_82586_1110x0_resize_q90_h2_lanczos_3.webp><img loading=lazy decoding=async src=/images/vim-openfoam_hu2ee0a4cb629d438b90e279549678bc92_82586_1110x0_resize_lanczos_3.png class="mb-6 w-full rounded img" alt="Customize VIM to work efficiently with OpenFOAM - Part 2" width=725 height=431></picture><h4 class=mb-3><a href=/blog/vim-openfoam-power-part2/>Customize VIM to work efficiently with OpenFOAM - Part 2</a></h4><ul class=mb-4><li class="mr-4 inline-block"><a href=/authors/mohammed-elwardi-fadeli/><i class="fa-regular fa-circle-user mr-2"></i>Mohammed Elwardi Fadeli</a></li><li class="mr-4 inline-block"><i class="fa-regular fa-folder mr-2"></i>
<a href=/categories/productivity/ class=ms-1>Productivity</a></li></ul><p class=mb-6>We&rsquo;ve seen in the previous part some ways to improve our interaction with OpenFOAM case directories and files.</p><a class="btn btn-outline-primary btn-sm" href=/blog/vim-openfoam-power-part2/>Read More</a></div></div><div class=lg:col-4><div class="bg-body dark:bg-darkmode-body"><picture><source srcset=/images/openfoam-pressure-permeability-results_hu8926a4d0f16743ed164258e025fc6888_122180_545x0_resize_q90_h2_lanczos_3.webp media="(max-width: 575px)"><source srcset=/images/openfoam-pressure-permeability-results_hu8926a4d0f16743ed164258e025fc6888_122180_600x0_resize_q90_h2_lanczos_3.webp media="(max-width: 767px)"><source srcset=/images/openfoam-pressure-permeability-results_hu8926a4d0f16743ed164258e025fc6888_122180_700x0_resize_q90_h2_lanczos_3.webp media="(max-width: 991px)"><source srcset=/images/openfoam-pressure-permeability-results_hu8926a4d0f16743ed164258e025fc6888_122180_1110x0_resize_q90_h2_lanczos_3.webp><img loading=lazy decoding=async src=/images/openfoam-pressure-permeability-results_hu8926a4d0f16743ed164258e025fc6888_122180_1110x0_resize_lanczos_3.png class="mb-6 w-full rounded img" alt="Permeability Simulation with OPENFOAM and OPENPNM" width=767 height=424></picture><h4 class=mb-3><a href=/blog/permeability-simulation-with-openfoam-and-openpnm/>Permeability Simulation with OPENFOAM and OPENPNM</a></h4><ul class=mb-4><li class="mr-4 inline-block"><a href=/authors/mohammed-elwardi-fadeli/><i class="fa-regular fa-circle-user mr-2"></i>Mohammed Elwardi Fadeli</a></li><li class="mr-4 inline-block"><i class="fa-regular fa-folder mr-2"></i>
<a href=/categories/porous-medium/ class=ms-1>Porous medium</a></li></ul><p class=mb-6>Permeability and Filtration coefficients are some must-know factors for oil/gas reservoir management and optimization.</p><a class="btn btn-outline-primary btn-sm" href=/blog/permeability-simulation-with-openfoam-and-openpnm/>Read More</a></div></div><div class=lg:col-4><div class="bg-body dark:bg-darkmode-body"><picture><source srcset=/images/forAll-openfoam-cpp_hu9adf402e5ea58479103080fa88241038_52836_545x0_resize_q90_h2_lanczos_3.webp media="(max-width: 575px)"><source srcset=/images/forAll-openfoam-cpp_hu9adf402e5ea58479103080fa88241038_52836_600x0_resize_q90_h2_lanczos_3.webp media="(max-width: 767px)"><source srcset=/images/forAll-openfoam-cpp_hu9adf402e5ea58479103080fa88241038_52836_700x0_resize_q90_h2_lanczos_3.webp media="(max-width: 991px)"><source srcset=/images/forAll-openfoam-cpp_hu9adf402e5ea58479103080fa88241038_52836_1110x0_resize_q90_h2_lanczos_3.webp><img loading=lazy decoding=async src=/images/forAll-openfoam-cpp_hu9adf402e5ea58479103080fa88241038_52836_1110x0_resize_lanczos_3.png class="mb-6 w-full rounded img" alt="The forAll Macro in OpenFOAM" width=675 height=392></picture><h4 class=mb-3><a href=/blog/the-forall-macro-in-openfoam/>The forAll Macro in OpenFOAM</a></h4><ul class=mb-4><li class="mr-4 inline-block"><a href=/authors/mohammed-elwardi-fadeli/><i class="fa-regular fa-circle-user mr-2"></i>Mohammed Elwardi Fadeli</a></li><li class="mr-4 inline-block"><i class="fa-regular fa-folder mr-2"></i>
<a href=/categories/programming/ class=ms-1>Programming</a></li></ul><p class=mb-6>Because of the frequent use of range-like loops in OpenFOAM (in the official code base, forks, and any independent work, for that matter), the developers have provided a &ldquo;shortcut&rdquo; to loop through all elements of a list—any list.</p><a class="btn btn-outline-primary btn-sm" href=/blog/the-forall-macro-in-openfoam/>Read More</a></div></div></div></div></div></section></main><footer class="bg-theme-light dark:bg-darkmode-theme-light"><div class=container><div class="row items-center py-10"><div class="lg:col-3 mb-8 text-center lg:mb-0 lg:text-left"><a class="navbar-brand inline-block" href=/><img fetchpriority=high decoding=async class="img logo-light" width=160 height=32 src=/images/logo_hu2ea1f536cd8a3d9765009a4dbd549167_7163_320x0_resize_q90_h2_lanczos_3.webp alt=FoamScience onerror='this.onerror=null,this.src="/images/logo_hu2ea1f536cd8a3d9765009a4dbd549167_7163_320x0_resize_lanczos_3.png"'>
<img fetchpriority=high decoding=async class="img logo-dark" width=160 height=32 src=/images/logo-darkmode_hub75990a2c9eb01f034c9bf9f242d1f22_9732_320x0_resize_q90_h2_lanczos_3.webp alt=FoamScience onerror='this.onerror=null,this.src="/images/logo-darkmode_hub75990a2c9eb01f034c9bf9f242d1f22_9732_320x0_resize_lanczos_3.png"'></a></div><div class="lg:col-6 mb-8 text-center lg:mb-0"><ul><li class="m-3 inline-block"><a href=/about/>About</a></li><li class="m-3 inline-block"><a href=/privacy-policy/>Privacy Policy</a></li></ul></div><div class="lg:col-3 mb-8 text-center lg:mb-0 lg:mt-0 lg:text-right"><ul class=social-icons><li><a target=_blank aria-label=X rel="nofollow noopener" href=https://twitter.com/><i class="fab fa-twitter"></i></a></li><li><a target=_blank aria-label=github rel="nofollow noopener" href=https://www.github.com/><i class="fab fa-github"></i></a></li><li><a target=_blank aria-label=linkedin rel="nofollow noopener" href=https://www.linkedin.com/><i class="fab fa-linkedin"></i></a></li></ul></div></div></div><div class="border-border dark:border-darkmode-border border-t py-7"><div class="text-light dark:text-darkmode-light container text-center"><p>© 2019-2023 <strong>Mohammed Elwardi Fadeli</strong>, Theme designed by <a href=https://zeon.studio target=_blank>Zeon Studio</a></p></div></div></footer><script crossorigin=anonymous integrity="sha256-HNtb4dMoWbNSeb1hh0/oFX85kBGiQY0bSBeOphsFH2s=" src=/js/scripts.min.1cdb5be1d32859b35279bd61874fe8157f399011a2418d1b48178ea61b051f6b.js></script>
<script crossorigin=anonymous integrity="sha256-B6xkgfh/Kvqv5KhwfzCl2bDxX83d75UmDJHTJqlOs3M=" src=/js/scripts-lazy.min.07ac6481f87f2afaafe4a8707f30a5d9b0f15fcdddef95260c91d326a94eb373.js defer></script>
<script>"serviceWorker"in navigator&&navigator.serviceWorker.register("/service-worker.js")</script></body></html>